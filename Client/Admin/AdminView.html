--- START OF FILE AdminView.html ---

<!DOCTYPE html>
<html>
  <head>
    <base target="_top">
    <title>Admin Dashboard</title>
    <script src="https://www.youtube.com/iframe_api"></script> <!-- YouTube IFrame API -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fabric.js/5.3.0/fabric.min.js"></script>
    <!-- Add Material Symbols (recommended) -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
    <!-- Add Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
      :root { /* Using :root for global scope */
            --theme-primary-color: #1a73e8; /* Google Blue */
            --theme-primary-hover: #1765cc; 
            --theme-text-color-primary: #202124;    /* Dark grey for main text */
            --theme-text-color-secondary: #5f6368; /* Lighter grey for secondary text/icons */
            --theme-icon-color: #5f6368;
            --theme-background-main: #f8f9fa;
            --theme-background-card: #ffffff;
            --theme-border-color: #dadce0;
            --theme-input-border-color: #80868b; 
            --theme-input-focus-border: #1a73e8; 
            --theme-font-family: 'Roboto', Arial, sans-serif;
            --theme-danger-color: #d93025; /* Google Red for danger */
            --theme-danger-hover: #c5221f;
            --theme-success-color: #1e8e3e; /* Google Green for success */
            --theme-success-hover: #187332;
        }
      body { 
            font-family: var(--theme-font-family);
            margin: 0; 
            background-color: var(--theme-background-main); 
            color: var(--theme-text-color-primary); 
        }
      .main-content-wrapper {
            padding: 20px;
        }
      .container { 
            background-color: var(--theme-background-card); 
            padding: 20px; 
            margin-bottom: 20px; 
            border-radius: 8px; 
            box-shadow: 0 1px 2px 0 rgba(60,64,67,0.3), 0 1px 3px 1px rgba(60,64,67,0.15); /* Google-style shadow */
            border: 1px solid var(--theme-border-color);
        }
      h1, h2 { 
            color: var(--theme-text-color-primary); 
            font-weight: 400; /* Lighter weight for headings, common in Material */
        }
        h1 { font-size: 1.8rem; margin-bottom: 1rem;} /* Adjust sizes as needed */
        h2 { font-size: 1.4rem; margin-bottom: 0.75rem;}
        h3 { font-size: 1.1rem; color: var(--theme-text-color-primary); font-weight: 500; margin-bottom: 0.5rem;} /* For "Slides" in slide panel */
      label { 
        display: inline-block; 
        margin-bottom: 6px; /* Slightly more breathing room */
        font-weight: 500; /* Material Medium */
        font-size: 0.875rem; /* 14px */
        color: var(--theme-text-color-secondary); 
      }
      
      button, .button { /* Added .button class for elements that should look like buttons */
            padding: 8px 16px; 
            cursor: pointer; 
            background-color: var(--theme-primary-color); 
            color: white; 
            border: none; 
            border-radius: 4px; 
            font-size: 0.875rem; /* 14px if base is 16px */
            font-weight: 500; 
            text-transform: uppercase; 
            letter-spacing: 0.089em; /* Material spec */
            transition: background-color 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
            box-shadow: 0 1px 2px 0 rgba(60,64,67,0.3), 0 1px 3px 1px rgba(60,64,67,0.15); /* Subtle shadow for buttons */
            display: inline-flex; /* For aligning icons if any */
            align-items: center;
            justify-content: center;
            text-decoration: none; /* For .button used on <a> tags */
        }
        button:hover, .button:hover { 
            background-color: var(--theme-primary-hover); 
            box-shadow: 0 1px 3px 0 rgba(60,64,67,0.3), 0 2px 5px 2px rgba(60,64,67,0.15); /* Slightly elevated shadow on hover */
        }
      button.edit-button, .button.edit-button { background-color: var(--theme-success-color); }
      button.edit-button:hover, .button.edit-button:hover { background-color: var(--theme-success-hover); }
      button.danger-button, .button.danger-button { background-color: var(--theme-danger-color); }
      button.danger-button:hover, .button.danger-button:hover { background-color: var(--theme-danger-hover); }
      button.secondary-button, .button.secondary-button { /* For less prominent actions */
        background-color: var(--theme-background-card);
        color: var(--theme-primary-color);
        border: 1px solid var(--theme-input-border-color);
        box-shadow: none;
      }
      button.secondary-button:hover, .button.secondary-button:hover {
        background-color: rgba(0,0,0,0.03);
        border-color: var(--theme-primary-hover);
        box-shadow: 0 1px 2px rgba(0,0,0,0.05);
      }
      
      /* General input styling - some of these will be overridden by more specific toolbar/popover rules */
      input[type="text"], 
      input[type="file"], 
      input[type="number"], 
      select, 
      textarea { 
        padding: 8px; 
        margin-bottom: 10px; 
        border: 1px solid var(--theme-input-border-color); 
        border-radius: 4px; 
        box-sizing: border-box; 
        width: auto; 
        font-family: var(--theme-font-family);
        font-size: 0.875rem;
        color: var(--theme-text-color-primary);
        background-color: var(--theme-background-card);
      }
      input[type="text"]::placeholder,
      textarea::placeholder {
        color: var(--theme-text-color-secondary);
        opacity: 0.7;
      }
      input[type="text"]:focus, 
      input[type="file"]:focus, 
      input[type="number"]:focus, 
      select:focus, 
      textarea:focus {
        border-color: var(--theme-input-focus-border);
        box-shadow: 0 0 0 1px var(--theme-input-focus-border);
        outline: none;
      }
      input[type="checkbox"] { 
        margin-right: 5px; 
        accent-color: var(--theme-primary-color);
      }

      #messageArea { margin-top: 15px; padding: 10px; border: 1px solid transparent; border-radius: 3px; min-height: 1.5em; font-size: 0.9rem;}
      .success { border-color: var(--theme-success-color); background-color: #e6f4ea; color: var(--theme-success-hover); } /* Light green bg */
      .error { border-color: var(--theme-danger-color); background-color: #fce8e6; color: var(--theme-danger-hover); } /* Light red bg */

      #adminProjectListContainer { margin-top: 15px; }
      .project-item { 
        background-color: var(--theme-background-card); /* Consistent with .container */
        padding: 15px; /* Consistent padding */
        margin-bottom: 12px; /* Slightly more spacing */
        border-radius: 8px; /* Consistent with .container */
        border: 1px solid var(--theme-border-color); /* Consistent border */
        display: flex; 
        justify-content: space-between; 
        align-items: center; 
        flex-wrap: wrap; 
        gap: 10px;
        box-shadow: 0 1px 2px 0 rgba(60,64,67,0.08), 0 1px 3px 1px rgba(60,64,67,0.05); /* Softer shadow */
      }
      .project-item:hover {
        box-shadow: 0 1px 3px 0 rgba(60,64,67,0.12), 0 2px 5px 2px rgba(60,64,67,0.08); /* Subtle hover shadow */
      }
      .project-item > div:first-child { flex-basis: 60%; min-width: 200px;}
      .project-item > div:last-child { 
        flex-basis: 35%; 
        min-width: 200px; 
        display: flex; 
        justify-content: flex-end; 
        align-items: center;
        gap: 8px; /* Add gap between buttons in project item */
      }
      .project-item span { font-size: 1.1em; display: block; color: var(--theme-text-color-primary); font-weight: 500;}
      .project-item .status-text { font-style: italic; color: var(--theme-text-color-secondary); font-size: 0.9em; font-weight: 400;}
      .project-item .project-status-select { 
        font-size: 0.9em; padding: 6px 8px; /* Consistent padding */
        border: 1px solid var(--theme-input-border-color); 
        border-radius: 4px; /* Consistent radius */
        background-color: var(--theme-background-card);
        color: var(--theme-text-color-primary);
        -webkit-appearance: none; 
        -moz-appearance: none;
        appearance: none;
        background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' fill='%235f6368' class='bi bi-chevron-down' viewBox='0 0 16 16'%3E%3Cpath fill-rule='evenodd' d='M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z'/%3E%3C/svg%3E");
        background-repeat: no-repeat;
        background-position: right 8px center;
        padding-right: 28px; 
      }

      /* Spinner CSS is now in Client/Shared/LoadingSpinner.html */

      .edit-controls-group {
        margin-bottom: 20px;
        padding: 15px;
        border: 1px solid var(--theme-border-color);
        border-radius: 5px;
        background-color: var(--theme-background-card);
      }
      .edit-controls-group label { margin-right: 10px; display: block; margin-bottom: 5px; }
      .edit-controls-group input[type="text"],
      .edit-controls-group input[type="file"] { display: block; width: calc(100% - 22px); margin-bottom: 15px; }
      .edit-controls-group button { margin-top: -5px; margin-bottom: 15px; }

      #fabricCanvasContainer { 
        display: flex; 
        justify-content: center; 
        align-items: center; 
        border: 1px dashed var(--theme-border-color); 
        margin-top: 15px; 
        position: relative; 
        background-color: var(--theme-background-main); /* Light background for canvas area */
      }
      #fabricCanvasElement { 
        border: 1px solid var(--theme-text-color-secondary); /* Slightly softer border for canvas */
        box-shadow: 0 1px 3px rgba(0,0,0,0.1); /* Subtle shadow for depth */
      }
      .media-placeholder { position: absolute; top: 10px; left: 10px; background-color: rgba(0, 0, 0, 0.7); color: white; padding: 5px 10px; font-size: 0.9em; border-radius: 3px; pointer-events: none; z-index: 5; }

      #slideManagementPanel { 
        margin-top: 20px; 
        padding: 15px; /* Consistent padding */
        background-color: var(--theme-background-card); /* Consistent with .container */
        border-radius: 8px; /* Consistent with .container */
        border: 1px solid var(--theme-border-color); /* Consistent border */
        box-shadow: 0 1px 2px 0 rgba(60,64,67,0.08), 0 1px 3px 1px rgba(60,64,67,0.05); /* Softer shadow */
      }
      #slideThumbnailsContainer { 
        display: flex; 
        flex-wrap: wrap; 
        gap: 10px; 
        margin-top: 10px; 
        min-height: 70px; /* Slightly taller */
        padding: 10px; /* More padding */
        border: 1px solid var(--theme-border-color); 
        background-color: var(--theme-background-main); 
        border-radius: 4px; /* Rounded corners for the container */
      }
      .slide-thumbnail { 
        width: 100px; height: 75px; 
        border: 2px solid var(--theme-border-color); /* Default border */
        background-color: var(--theme-background-main); /* Use main background for contrast */
        display: flex; justify-content: center; align-items: center; 
        cursor: pointer; 
        font-size: 0.8em; text-align: center; position: relative; 
        border-radius: 4px; /* Consistent radius */
        color: var(--theme-text-color-secondary);
        transition: border-color 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
      }
      .slide-thumbnail.active-slide { 
        border-color: var(--theme-primary-color); 
        box-shadow: 0 0 0 2px var(--theme-primary-color); /* More prominent active state */
        color: var(--theme-text-color-primary);
      }
      .slide-thumbnail:hover { 
        border-color: var(--theme-primary-hover); 
        box-shadow: 0 0 0 1px var(--theme-primary-hover);
      }
      .delete-slide-btn { 
        position: absolute; top: -8px; right: -8px; 
        background-color: var(--theme-danger-color); 
        color: white; border: none; border-radius: 50%; 
        width: 22px; height: 22px; /* Slightly larger */
        font-size: 14px; /* Larger icon */
        line-height: 22px; text-align: center; cursor: pointer; 
        display: none; 
        box-shadow: 0 1px 2px rgba(0,0,0,0.2);
        transition: background-color 0.2s ease;
      }
      .delete-slide-btn:hover {
        background-color: var(--theme-danger-hover);
      }
      .slide-thumbnail:hover .delete-slide-btn { display: flex; align-items: center; justify-content: center; } /* Use flex for centering icon if needed */


      /* --- NEW TOOLBAR STYLES --- */
      #overlayPropertiesToolbar {
            padding: 6px; /* Reduced padding */
            border: 1px solid var(--theme-border-color);
            background-color: var(--theme-background-card); 
            border-radius: 8px; /* Consistent radius */
            margin-bottom: 15px;
            display: none; 
            box-shadow: 0 1px 2px 0 rgba(60,64,67,0.15), 0 1px 3px 1px rgba(60,64,67,0.1); /* Softer shadow */
        }
      .fabric-toolbar-row {
        display: flex;
        align-items: center;
        gap: 4px; /* Slightly reduced gap */
        padding: 4px 0; /* Reduced padding */
        flex-wrap: wrap; 
      }
      .fabric-toolbar-row:not(:last-child) {
            border-bottom: 1px solid var(--theme-border-color); 
        }
      .toolbar-group {
        display: flex;
        align-items: center;
        gap: 2px; 
        padding: 0 6px; /* Reduced padding */
        border-right: 1px solid var(--theme-border-color); 
      }
      .toolbar-group:last-child {
        border-right: none;
      }
      .toolbar-button {
            background: none;
            border: 1px solid transparent;
            color: var(--theme-icon-color); 
            padding: 6px; 
            margin: 0 2px; 
            border-radius: 4px; 
            min-width: 36px; 
            height: 36px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            transition: background-color 0.15s ease-in-out, border-color 0.15s ease-in-out;
        }
        .toolbar-button:hover {
            background-color: rgba(0,0,0,0.05); 
            border-color: transparent; 
        }
        .toolbar-button.active, .toolbar-button.popover-active { 
            background-color: var(--theme-primary-color); 
            color: #ffffff; /* Ensure high contrast for active state */
            border-color: var(--theme-primary-color);
        }
        .toolbar-button.active:hover, .toolbar-button.popover-active:hover {
            background-color: var(--theme-primary-hover);
            border-color: var(--theme-primary-hover);
            color: #ffffff; /* Ensure high contrast for active state */
        }
      .toolbar-button .material-symbols-outlined {
        font-size: 20px; 
      }
        .toolbar-button.danger-button { 
            color: var(--theme-danger-color);
        }
        .toolbar-button.danger-button:hover {
            background-color: rgba(217, 48, 37, 0.1); 
            color: var(--theme-danger-hover);
        }
        .toolbar-button.danger-button.active { 
            background-color: var(--theme-danger-color);
            color: white;
        }

        .toolbar-input-compact, 
        .toolbar-popover input[type="text"],
        .toolbar-popover input[type="number"],
        .toolbar-popover textarea {
            padding: 6px 8px;
            font-size: 0.875rem;
            border: 1px solid var(--theme-input-border-color);
            border-radius: 4px;
            box-sizing: border-box;
            transition: border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out;
            background-color: var(--theme-background-card); 
            color: var(--theme-text-color-primary);
        }
        .toolbar-input-compact:focus,
        .toolbar-popover input[type="text"]:focus,
        .toolbar-popover input[type="number"]:focus,
        .toolbar-popover textarea:focus {
            border-color: var(--theme-input-focus-border);
            box-shadow: 0 0 0 1px var(--theme-input-focus-border); 
            outline: none;
        }

        .toolbar-input-compact { 
            width: 50px; 
            height: 30px; 
            margin: 0 2px; 
        }
      input[type="color"].toolbar-color-input {
            width: 30px; 
            height: 30px;
            padding: 2px; 
            border: 1px solid var(--theme-input-border-color);
            border-radius: 4px;
            background: none; 
            vertical-align: middle;
            margin: 0 2px;
        }
        input[type="color"].toolbar-color-input:hover {
             border-color: var(--theme-input-focus-border); 
        }
       #objOpacity { 
            width: calc(100% - 50px); 
            height: 20px; 
            vertical-align: middle;
            accent-color: var(--theme-primary-color); 
        }
        #objOpacityValueDisplay { /* Added for opacity value */
            font-size: 0.8em;
            color: var(--theme-text-color-secondary);
            margin-left: 4px;
            min-width: 30px; /* Ensure space for "100%" */
            text-align: right;
        }
        .toolbar-select-compact,
        .toolbar-popover select {
            padding: 6px 8px;
            font-size: 0.875rem;
            border: 1px solid var(--theme-input-border-color);
            border-radius: 4px;
            background-color: var(--theme-background-card);
            color: var(--theme-text-color-primary);
            height: 30px; 
            transition: border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out;
            -webkit-appearance: none; 
            -moz-appearance: none;
            appearance: none;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' fill='%235f6368' class='bi bi-chevron-down' viewBox='0 0 16 16'%3E%3Cpath fill-rule='evenodd' d='M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z'/%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: right 8px center;
            padding-right: 28px; 
        }
        .toolbar-select-compact:focus,
        .toolbar-popover select:focus {
            border-color: var(--theme-input-focus-border);
            box-shadow: 0 0 0 1px var(--theme-input-focus-border);
            outline: none;
        }
       #objTextContent { 
           height: 30px; 
           vertical-align: middle; 
           font-family: var(--theme-font-family); /* Ensure consistent font */
           background-color: var(--theme-background-card); /* Consistent bg */
           color: var(--theme-text-color-primary); /* Consistent text color */
        }
        #objFontFamily { 
             width: 100%; 
        }
        #objShadowBlur { 
            width: calc(100% - 100px); 
            max-width: 150px;        
            vertical-align: middle;
            accent-color: var(--theme-primary-color);
        }

      .toolbar-group:first-child {
        margin-right: 8px; /* Consistent spacing */
        padding-right: 4px; 
      }
      .toolbar-group:first-child .toolbar-button {
        margin-right: 2px; 
      }

      .toolbar-popover {
            position: absolute;
            background-color: var(--theme-background-card);
            border: 1px solid var(--theme-border-color);
            box-shadow: 0 2px 6px 2px rgba(60,64,67,0.15); /* Google-style popover shadow */
            padding: 16px; /* Consistent padding */
            border-radius: 8px; 
            z-index: 200; 
            display: none;
            min-width: 280px; 
            max-width: 350px; 
        }
      .toolbar-popover h4 { 
            margin-top: 0;
            margin-bottom: 12px; /* More spacing */
            font-size: 1rem; /* 16px */
            font-weight: 500; /* Material Medium */
            border-bottom: 1px solid var(--theme-border-color);
            padding-bottom: 10px; /* More spacing */
            color: var(--theme-text-color-primary);
        }
      .toolbar-popover label { /* Consistent with general label style */
            display: inline-block;
            margin-bottom: 6px; 
            margin-right: 8px; 
            font-weight: 500; 
            font-size: 0.875rem;
            color: var(--theme-text-color-secondary);
        }
      .toolbar-popover input[type="number"],
      .toolbar-popover input[type="color"],
      .toolbar-popover input[type="text"],
      .toolbar-popover select,
      .toolbar-popover textarea { 
        width: 150px; /* Default width, can be overridden */
        margin-bottom: 8px; /* Consistent spacing */
      }
      .toolbar-popover input[type="checkbox"] {
            margin-right: 5px; 
            vertical-align: middle;
            accent-color: var(--theme-primary-color); 
        }
      .toolbar-popover .checkbox-label { 
            width: auto; 
            margin-left: 0; 
            font-weight: 400; /* Normal weight for checkbox labels */
            color: var(--theme-text-color-primary); 
            vertical-align: middle;
            font-size: 0.875rem; /* Consistent with other labels */
        }

      .config-section { 
        margin-top: 12px; /* More spacing */
        padding-top: 12px; 
        padding-left: 12px;
        border-left: 3px solid var(--theme-primary-color); /* Thicker accent border */
        border-top: 1px solid var(--theme-border-color); /* Use solid instead of dashed for cleaner look */
      }
      .config-section label { width: auto; } 
      .config-section input, .config-section textarea { width: calc(100% - 16px); max-width: none; } /* Adjust width for padding */

      .sr-only {
        position: absolute;
        width: 1px;
        height: 1px;
        padding: 0;
        margin: -1px;
        overflow: hidden;
        clip: rect(0, 0, 0, 0);
        white-space: nowrap;
        border-width: 0;
      }
      
      .media-tabs {
        display: flex;
        border-bottom: 1px solid var(--theme-border-color);
        margin-bottom: 15px;
      }
      .media-tab-btn {
        background: none;
        border: none;
        padding: 10px 15px; /* More padding for tappability */
        cursor: pointer;
        color: var(--theme-text-color-secondary); 
        font-size: 0.875rem; /* 14px */
        font-weight: 500; /* Medium weight for tabs */
        opacity: 0.8; /* Slightly more visible */
        transition: all 0.2s ease-in-out;
        border-bottom: 2px solid transparent;
      }
      .media-tab-btn:hover {
        background-color: rgba(0,0,0,0.03);
        color: var(--theme-primary-color);
      }
      .media-tab-btn.active {
        opacity: 1;
        border-bottom: 2px solid var(--theme-primary-color);
        color: var(--theme-primary-color); 
        font-weight: 500; /* Keep consistent weight */
      }
      .media-tab-pane {
        display: none;
        padding: 15px 5px; /* More padding */
      }
      .media-tab-pane.active {
        display: block;
      }

      .media-upload-zone {
        border: 2px dashed var(--theme-border-color); /* Use theme border color */
        border-radius: 8px; /* Consistent radius */
        padding: 30px 20px;
        text-align: center;
        cursor: pointer;
        transition: border-color 0.2s ease-in-out, background-color 0.2s ease-in-out;
        margin: 10px 0;
        background-color: var(--theme-background-main); 
        min-height: 100px; 
      }
      .media-upload-zone:hover {
        border-color: var(--theme-primary-hover);
        background-color: #e8f0fe; /* Consistent with existing hover */
      }
      .media-upload-zone.drag-over {
        border-color: var(--theme-success-hover);
        background-color: #e6f4ea; /* Consistent with existing hover */
      }

      .upload-prompt {
        display: flex;
        flex-direction: column;
        align-items: center;
        color: var(--theme-text-color-secondary);
      }
      .upload-prompt .material-symbols-outlined {
        font-size: 36px;
        margin-bottom: 10px;
        color: var(--theme-icon-color);
      }
      .upload-prompt p { 
        font-size: 0.9em;
        margin-bottom: 5px;
        margin-top: 0; 
      }

      .youtube-input-group {
        display: flex;
        gap: 10px;
        margin-top: 10px;
        align-items: center; /* Align items vertically */
      }
      .youtube-input-group input {
        flex: 1;
        margin-bottom: 0; /* Remove bottom margin if it's the only element */
      }
      .youtube-input-group button {
        flex-shrink: 0; /* Prevent button from shrinking */
      }


      .shapes-buttons { 
        display: grid; /* Use grid for better alignment */
        grid-template-columns: repeat(auto-fit, minmax(80px, 1fr)); /* Responsive columns */
        gap: 10px;
      }
      .shape-button { 
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center; /* Center content vertically */
        padding: 12px 8px; /* Adjusted padding */
        background: var(--theme-background-card); /* Use card background */
        border: 1px solid var(--theme-border-color);
        border-radius: 8px; /* Consistent radius */
        cursor: pointer;
        min-height: 70px; /* Ensure consistent height */
        transition: background-color 0.2s ease-in-out, border-color 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
        font-size: 0.875rem; /* Consistent font size */
        text-align: center;
      }
      .shape-button:hover {
        background-color: rgba(0,0,0,0.03); /* Subtle hover */
        border-color: var(--theme-input-border-color);
        box-shadow: 0 1px 2px rgba(0,0,0,0.05);
      }
      .shape-button .material-symbols-outlined {
        font-size: 24px; 
        margin-bottom: 5px; 
      }
      .shape-button, 
      .shape-button .material-symbols-outlined,
      .shape-button span {
          color: var(--theme-text-color-primary) !important; 
      }

      .position-controls {
        display: flex;
        flex-direction: column;
        gap: 12px; /* Increased gap */
      }
      .position-control-row {
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 10px;
      }
      .position-control-row label {
        flex: 0 0 70px; 
        text-align: right;
        font-size: 0.875rem; /* Consistent font size */
        color: var(--theme-text-color-secondary);
      }
      .position-control-row input { 
        flex: 1;
        min-width: auto; 
        width: 60px; 
      }
      
      #notificationContainer {
        position: fixed;
        top: 20px;
        right: 20px;
        z-index: 9999;
        max-width: 300px;
      }
      .notification {
        padding: 12px 15px;
        margin-bottom: 10px;
        border-radius: 4px;
        box-shadow: 0 2px 5px rgba(0,0,0,0.15);
        transform: translateX(120%);
        transition: transform 0.3s ease;
        color: white;
        opacity: 0.95; 
      }
      .notification.visible {
        transform: translateX(0);
      }
      .notification.success {
        background-color: var(--theme-success-color);
      }
      .notification.error {
        background-color: var(--theme-danger-color);
      }
      .notification.info {
        background-color: var(--theme-primary-color);
      }

      .shapes-dropdown { 
        position: absolute;
        background-color: var(--theme-background-card);
        border: 1px solid var(--theme-border-color);
        border-radius: 4px;
        box-shadow: 0 2px 5px rgba(0,0,0,0.15);
        z-index: 1000; 
        padding: 5px 0;
      }
      .shape-option { 
        display: flex;
        align-items: center;
        padding: 8px 15px;
        cursor: pointer;
        white-space: nowrap;
        color: var(--theme-text-color-primary);
      }
      .shape-option:hover {
        background-color: rgba(0,0,0,0.05);
      }
      .shape-option .material-symbols-outlined {
        margin-right: 8px;
        font-size: 18px;
        color: var(--theme-icon-color);
      }

      /* Styles for Timestamp Overlay Modal */
      #timestampOverlayModal {
        display: none; /* Hidden by default */
        position: fixed; 
        z-index: 1002; /* Above question modal but below loading spinner */
        left: 50%;
        top: 50%;
        transform: translate(-50%, -50%);
        width: 500px;
        max-height: 80vh;
        background-color: var(--theme-background-card);
        border: 1px solid var(--theme-border-color);
        border-radius: 8px;
        box-shadow: 0 2px 6px 2px rgba(60,64,67,0.15); /* Google-style popover shadow */
        padding: 20px;
        overflow-y: auto;
      }
      #timestampOverlayModal h3, #questionModal h3 { /* Shared styling for modal headers */
        margin-top: 0;
        border-bottom: 1px solid var(--theme-border-color);
        padding-bottom: 10px;
        margin-bottom: 15px;
        font-size: 1.2rem; /* Consistent heading size */
        font-weight: 500; /* Material Medium */
        color: var(--theme-text-color-primary);
      }
      #timestampOverlayList {
        list-style: none;
        padding: 0;
        margin-bottom: 15px;
        max-height: 300px; /* Limit height and allow scroll */
        overflow-y: auto;
        border: 1px solid var(--theme-border-color);
        padding: 10px;
        border-radius: 4px;
        background-color: var(--theme-background-main); /* Light bg for list */
      }
      #timestampOverlayList li {
        padding: 8px 10px; /* More padding */
        border-bottom: 1px solid var(--theme-border-color); /* Solid border */
        font-size: 0.9rem;
        color: var(--theme-text-color-primary);
      }
      #timestampOverlayList li:last-child {
        border-bottom: none;
      }
      #timestampOverlayModal .checkbox-label,
      #questionModal .checkbox-label { /* Consistent checkbox labels in modals */
        font-weight: 400; /* Normal weight */
        color: var(--theme-text-color-primary);
        font-size: 0.875rem;
      }
      #timestampOverlayModal button,
      #questionModal button { /* Ensure modal buttons follow theme */
        margin-right: 10px;
      }
      #timestampOverlayModal button:last-of-type,
      #questionModal button:last-of-type {
        margin-right: 0; /* Remove margin for last button */
      }
      #addQuestionBtn, #manageTimestampOverlaysButton { /* Style timeline buttons */
        /* Using .button class would make them uppercase, which might be too strong here. */
        /* Let's give them a slightly softer primary look */
        padding: 6px 12px;
        font-size: 0.8rem;
        text-transform: none; /* Override default button uppercase */
        letter-spacing: normal; /* Override default button letter-spacing */
      }
      #manageTimestampOverlaysButton {
        background-color: var(--theme-success-color); /* Use success color for "Manage" */
      }
      #manageTimestampOverlaysButton:hover {
        background-color: var(--theme-success-hover);
      }
      #videoTimelineControls input[type="range"] {
        accent-color: var(--theme-primary-color);
      }
      #questionModal .question-option-group label:not(.checkbox-label) { /* Target only textual labels for options */
        width: 60px; /* Fixed width for "Option X:" */
        text-align: right;
        margin-right: 5px;
      }
      #questionModal .question-option-group input[type="text"] {
        flex-grow: 1; /* Allow text input to take remaining space */
      }
      #questionModal .question-option-group {
        display: flex; /* Align label, input, and radio button nicely */
        align-items: center;
      }


      /* --- Responsive Design --- */

      /* Medium screens (tablets, smaller desktops) */
      @media (max-width: 768px) {
        .main-content-wrapper {
            padding: 15px;
        }
        h1 { font-size: 1.6rem; }
        h2 { font-size: 1.3rem; }
        h3 { font-size: 1.0rem; }

        .project-item {
            flex-direction: column;
            align-items: flex-start;
        }
        .project-item > div:first-child,
        .project-item > div:last-child {
            flex-basis: 100%;
            width: 100%;
            justify-content: flex-start; /* Align controls to the left when stacked */
        }
        .project-item .project-status-select {
            margin-right: 0; /* Remove right margin when stacked */
            margin-top: 5px; /* Add some top margin */
        }

        #createProjectSection input[type="text"],
        #createProjectSection button {
            width: 100%;
            box-sizing: border-box; /* Ensure padding doesn't make it overflow */
        }
        #createProjectSection input[type="text"] {
            margin-bottom: 10px;
        }

        .fabric-toolbar-row {
            flex-wrap: wrap; /* Allow groups to wrap */
        }
        .toolbar-group {
            border-right: none; /* Remove vertical borders between groups when they might wrap */
            padding: 5px; /* Add some padding for wrapped groups */
        }
        #overlayPropertiesToolbar {
            padding: 5px;
        }

        .toolbar-popover {
            width: 80vw; /* Make popovers wider */
            max-width: 400px; /* But not excessively wide */
            left: 50% !important; /* Override inline style if JS sets it */
            transform: translateX(-50%) translateY(5px) !important; /* Adjust position */
            max-height: 70vh;
            overflow-y: auto;
        }
        #timestampOverlayModal {
            width: 90vw;
            max-width: 450px;
        }
        
        /* Ensure canvas container can shrink */
        #fabricCanvasContainer {
            width: 100%; /* Allow it to shrink */
            height: auto; /* Adjust height as needed, or let JS handle */
            min-height: 300px; /* Example minimum height */
        }
         /* Ensure video timeline controls are usable */
        #videoTimelineControls input[type="range"] {
            width: calc(100% - 20px); /* Adjust for padding */
        }
      }

      /* Small screens (mobile phones) */
      @media (max-width: 480px) {
        .main-content-wrapper {
            padding: 10px;
        }
        h1 { font-size: 1.4rem; }
        h2 { font-size: 1.2rem; }

        #slideThumbnailsContainer {
            justify-content: center; /* Center thumbnails if they don't fill width */
        }
        .slide-thumbnail {
            width: 80px;
            height: 60px;
        }

        .toolbar-button {
            padding: 5px; /* Slightly reduce padding */
            min-width: 32px; /* Slightly smaller min-width */
            height: 32px;
        }
        .toolbar-button .material-symbols-outlined {
            font-size: 18px; /* Smaller icons */
        }
        .toolbar-input-compact {
            width: 45px;
            height: 28px;
        }
        #objTextContent {
            width: 150px; /* Adjust text area in toolbar */
        }

        .toolbar-popover {
            width: 95vw; /* Popovers take almost full width */
            max-width: none; /* Remove max-width constraint */
            font-size: 0.9rem; /* Slightly smaller font in popovers */
        }
         .toolbar-popover label,
         .toolbar-popover input,
         .toolbar-popover select,
         .toolbar-popover textarea {
            font-size: 0.85rem; /* Ensure inputs are also smaller */
         }
        #timestampOverlayModal {
            width: 95vw;
        }

        input[type="text"], 
        input[type="file"], 
        input[type="number"], 
        select, 
        textarea,
        button { /* General inputs and buttons full width */
            width: 100%;
            box-sizing: border-box;
            margin-left: 0;
            margin-right: 0;
        }
        .toolbar-group button, /* Keep toolbar buttons inline */
        .project-item button, /* Keep project item buttons inline if possible or manage with flex */
        .edit-controls-group button {
             width: auto; /* Override general full width for specific cases */
        }
        .project-item > div:last-child button { /* Make buttons in project item controls take more width if needed */
             flex-grow: 1; /* Allow buttons to grow */
             margin-bottom: 5px;
        }
        .project-item > div:last-child {
            display: flex;
            flex-direction: column; /* Stack buttons in project item controls */
        }
        .project-item .project-status-select {
             width: 100%; /* Full width for select in project item */
        }

        #questionModal {
            width: 95vw; /* Make question modal responsive */
            font-size: 0.9rem;
            padding: 15px; /* Adjust padding for smaller modal */
        }
        #questionModal input[type="text"],
        #questionModal textarea {
            width: calc(100% - 16px); /* Adjust for padding (box-sizing) */
            font-size: 0.85rem;
        }
         #questionModal .question-option-group input[type="text"] {
            width: calc(100% - 95px); /* Specific adjustment for option text inputs */
         }
         #questionModal label { /* Ensure labels in question modal are also responsive */
            font-size: 0.85rem;
         }
         .project-item > div:last-child button { /* Ensure project item buttons have some base style if not covered by .button */
            padding: 6px 10px;
            font-size: 0.8rem;
         }


      }

    </style>
  </head>
  <body>
    <div class="main-content-wrapper">
    <h1>Admin Dashboard</h1>

    <!-- View Container for List/Create Projects -->
    <div id="listViewContainer">
        <div class="container" id="createProjectSection">
          <h2>Create New Project</h2>
          <label for="projectTitleInput">Project Title:</label>
          <input type="text" id="projectTitleInput" placeholder="Enter project title">
          <button id="createProjectButton">Create Project</button>
        </div>
        <div class="container" id="projectListSection">
            <h2>Existing Projects</h2>
            <div id="adminProjectListContainer">
                 <!-- Dynamically populated -->
            </div>
        </div>
    </div> <!-- End of listViewContainer -->

    <!-- View Container for Editing a Project -->
    <div class="container" id="editViewContainer" style="display:none;">
        <button id="backToProjectsListButton">Back to Projects List</button>
        <h2 id="editingProjectTitle">Editing Project: </h2>
        
        <div id="notificationContainer"></div>
          
        <div id="mediaToolsPopover" class="toolbar-popover">
            <h4>Media Settings</h4>
            <div class="media-tabs">
                <button class="media-tab-btn active" data-tab="image-tab">Image</button>
                <button class="media-tab-btn" data-tab="audio-tab">Audio</button>
                <button class="media-tab-btn" data-tab="youtube-tab">YouTube</button>
            </div>
            <div class="media-tab-content">
                <div id="image-tab" class="media-tab-pane active">
                    <p>Paste an image, drag a file, or click to upload.</p>
                    <div class="media-upload-zone" id="imageDropZone">
                        <input type="file" id="imageUploader" accept="image/*" style="display:none">
                        <div class="upload-prompt">
                            <span class="material-symbols-outlined">image</span>
                            <p>Drop image or click</p>
                        </div>
                    </div>
                </div>
                <div id="audio-tab" class="media-tab-pane">
                    <p>Drag an audio file or click to upload.</p>
                    <div class="media-upload-zone" id="audioDropZone">
                        <input type="file" id="audioUploader" accept="audio/*" style="display:none">
                        <div class="upload-prompt">
                            <span class="material-symbols-outlined">audio_file</span>
                            <p>Drop audio or click</p>
                        </div>
                    </div>
                    <div id="audioControls" style="display: none; margin-top: 15px; padding-top: 10px;">
                        <span id="attachedAudioName" style="margin-right: 10px; font-style: italic;"></span>
                        <button id="removeAudioButton" class="danger-button" style="padding: 5px 8px; font-size: 0.8em;">Remove Audio</button>
                    </div>
                </div>
                <div id="youtube-tab" class="media-tab-pane">
                    <p>Paste a YouTube video link below.</p>
                    <div class="youtube-input-group">
                        <input type="text" id="youtubeUrlInput" placeholder="Paste YouTube URL here">
                        <button id="setYoutubeBackgroundButton">Set BG</button>
                    </div>
                    <label style="display: block; margin-top: 10px; font-weight: normal;">
                        <input type="checkbox" id="youtubeShowClickToBegin"> Show "Click to Begin" Button on video start
                    </label>
                </div>
            </div>
        </div>

        <div id="shapesPopover" class="toolbar-popover">
            <h4>Add Shape</h4>
            <div class="shapes-buttons"> 
                <button id="addRectangleButton" class="shape-button">
                    <span class="material-symbols-outlined">rectangle</span>
                    <span>Rectangle</span>
                </button>
                <button id="addCircleButton" class="shape-button">
                    <span class="material-symbols-outlined">circle</span>
                    <span>Circle</span>
                </button>
                <button id="addTextboxButton" class="shape-button">
                    <span class="material-symbols-outlined">text_fields</span>
                    <span>Text</span>
                </button>
            </div>
        </div>

        <div id="positionToolsPopover" class="toolbar-popover">
            <h4>Position & Size</h4>
            <div class="position-controls">
                <div class="position-control-row"> <label for="objX">X:</label> <input type="number" id="objX" class="toolbar-input-compact"> </div>
                <div class="position-control-row"> <label for="objY">Y:</label> <input type="number" id="objY" class="toolbar-input-compact"> </div>
                <div class="position-control-row"> <label for="objWidth">Width:</label> <input type="number" id="objWidth" class="toolbar-input-compact" min="0"> </div>
                <div class="position-control-row"> <label for="objHeight">Height:</label> <input type="number" id="objHeight" class="toolbar-input-compact" min="0"> </div>
                <div class="position-control-row"> <label for="objAngle">Angle:</label> <input type="number" id="objAngle" class="toolbar-input-compact"> </div>
            </div>
        </div>

        <div id="overlayPropertiesToolbar" style="display:none;">
            <div class="fabric-toolbar-row">
                <div class="toolbar-group"> 
                    <button class="toolbar-button" id="mediaToolsButton" title="Media Tools"> <span class="material-symbols-outlined">perm_media</span> </button>
                    <button class="toolbar-button" id="addShapeButton" title="Add Shapes"> <span class="material-symbols-outlined">shapes</span> </button>
                    <button class="toolbar-button" id="positionToolsButton" title="Position & Size Tools"> <span class="material-symbols-outlined">straighten</span> </button>
                </div>
                <div class="toolbar-group"> 
                    <button class="toolbar-button" id="fillColorButton" title="Fill Color"><span class="material-symbols-outlined">format_paint</span></button>
                    <button class="toolbar-button" id="strokeColorButton" title="Stroke Color"><span class="material-symbols-outlined">border_color</span></button>
                </div>
                <div class="toolbar-group"> 
                    <button class="toolbar-button" id="opacityButton" title="Opacity"><span class="material-symbols-outlined">opacity</span></button>
                </div>
                 <div class="toolbar-group"> 
                    <button class="toolbar-button" id="shadowSettingsButton" title="Shadow Settings"><span class="material-symbols-outlined">blur_on</span></button>
                    <button class="toolbar-button" id="interactionSettingsButton" title="Interaction Settings"><span class="material-symbols-outlined">touch_app</span></button>
                    <button class="toolbar-button" id="animationSettingsButton" title="Animation Settings"><span class="material-symbols-outlined">animation</span></button>
                </div>
                <div class="toolbar-group">
                    <button class="toolbar-button" id="undoButton" title="Undo"><span class="material-symbols-outlined">undo</span></button>
                    <button class="toolbar-button" id="redoButton" title="Redo"><span class="material-symbols-outlined">redo</span></button>
                    <button class="toolbar-button danger-button" id="deleteObjectButton" title="Delete Selected Object"><span class="material-symbols-outlined">delete</span></button>
                </div>
            </div>

            <div class="fabric-toolbar-row" id="textSpecificControls" style="display:none;">
                 <div class="toolbar-group"> 
                    <button class="toolbar-button" id="fontFamilyButton" title="Font Family"><span class="material-symbols-outlined">font_download</span></button>
                    <label for="objFontSize" class="sr-only">Font Size</label><input type="number" id="objFontSize" min="1" class="toolbar-input-compact" title="Font Size" value="24">
                </div>
                <div class="toolbar-group"> 
                    <button class="toolbar-button" id="fontWeightButton" title="Bold"><span class="material-symbols-outlined">format_bold</span></button>
                    <button class="toolbar-button" id="fontStyleButton" title="Italic"><span class="material-symbols-outlined">format_italic</span></button>
                </div>
                <div class="toolbar-group" id="textAlignGroup"> 
                    <button class="toolbar-button" data-align="left" title="Align Left"><span class="material-symbols-outlined">format_align_left</span></button>
                    <button class="toolbar-button" data-align="center" title="Align Center"><span class="material-symbols-outlined">format_align_center</span></button>
                    <button class="toolbar-button" data-align="right" title="Align Right"><span class="material-symbols-outlined">format_align_right</span></button>
                    <button class="toolbar-button" data-align="justify" title="Align Justify"><span class="material-symbols-outlined">format_align_justify</span></button>
                </div>
                 <div class="toolbar-group"> 
                    <label for="objLineHeight" class="sr-only">Line Height</label><input type="number" id="objLineHeight" step="0.1" min="0" class="toolbar-input-compact" title="Line Height" value="1.16">
                    <label for="objCharSpacing" class="sr-only">Character Spacing</label><input type="number" id="objCharSpacing" class="toolbar-input-compact" title="Character Spacing" value="0">
                </div>
                <div class="toolbar-group"> 
                     <label for="objTextContent" class="sr-only">Text Content</label>
                     <textarea id="objTextContent" rows="1" title="Text Content" style="width: 200px; vertical-align:middle;"></textarea>
                </div>
            </div>

            <!-- Popovers for detailed settings -->
            <div id="shadowPopover" class="toolbar-popover">
                <h4>Shadow</h4>
                <label for="objShadowColor">Color:</label> <input type="color" id="objShadowColor" value="#000000"><br>
                <label for="objShadowBlur">Blur:</label> <input type="range" id="objShadowBlur" min="0" max="50" step="1" value="0" style="vertical-align: middle;"><br>
                <label for="objShadowOffsetX">Offset X:</label> <input type="number" id="objShadowOffsetX" value="0"><br>
                <label for="objShadowOffsetY">Offset Y:</label> <input type="number" id="objShadowOffsetY" value="0"><br>
                <input type="checkbox" id="objShadowAffectStroke"> <label for="objShadowAffectStroke" class="checkbox-label">Affects Stroke</label><br>
                <input type="checkbox" id="objShadowNonScaling"> <label for="objShadowNonScaling" class="checkbox-label">Non-Scaling</label>
            </div>

            <div id="interactionPopover" class="toolbar-popover">
                <h4>Interactions</h4>
                <label for="objInteractionTrigger">Trigger:</label> <select id="objInteractionTrigger"><option value="">None</option><option value="click">On Click</option><option value="hover">On Hover</option><option value="clickAndHold">Click and Hold</option></select><br>
                <label for="objInteractionAction">Action:</label> <select id="objInteractionAction"><option value="">None</option><option value="showModal">Show Modal</option><option value="navigateToSlide">Navigate to Slide</option><option value="navigateToURL">Navigate to URL</option><option value="spotlight">Spotlight</option><option value="reveal">Reveal</option><option value="panZoomToTarget">Pan/Zoom to Target</option></select>
                
                <div id="modalContentConfig" class="config-section" style="display:none;">
                  <label for="objModalContent">Modal Content:</label><br>
                  <textarea id="objModalContent" rows="3"></textarea>
                </div>
                <div id="navigateToConfig" class="config-section" style="display:none;">
                  <label for="objNavigateTo">Target (Slide ID/URL):</label>
                  <input type="text" id="objNavigateTo">
                </div>
                <div id="panZoomConfigEl" class="config-section" style="display:none;"> <!-- ID matches JS -->
                  <label for="objPanZoomLevel">Zoom Level (e.g., 1.5):</label>
                  <input type="number" id="objPanZoomLevel" step="0.1" min="0.1" value="1.5">
                </div>
            </div>

            <div id="animationPopover" class="toolbar-popover">
               <h4>Animations</h4>
               <label for="objAnimationTrigger">Anim. Trigger:</label> <select id="objAnimationTrigger"><option value="">None</option><option value="onLoad">On Slide Load</option><option value="Hover">On Hover</option><option value="onClick">On Click</option></select><br>
               <label for="objAnimationType">Anim. Type:</label> <select id="objAnimationType"><option value="">None</option><option value="wiggle">Wiggle</option><option value="float">Float</option><option value="growShrink">Grow/Shrink</option></select><br>
               
               <div id="animationParamsConfig" class="config-section" style="display:none;">
                   <label for="objAnimationSpeed">Speed:</label>
                   <select id="objAnimationSpeed"> 
                       <option value="slow">Slow</option>
                       <option value="normal" selected>Normal</option>
                       <option value="fast">Fast</option>
                   </select><br>
                   <label for="objAnimationStrength">Strength:</label> <input type="number" id="objAnimationStrength" step="0.1" value="5"> <span id="objAnimationStrengthUnit" style="font-size:0.8em; margin-left:5px;">(pixels/degrees/scale)</span><br>
                   <label for="objAnimationLoop">Loop:</label>
                   <select id="objAnimationLoop"> 
                       <option value="false">No</option>
                       <option value="true">Yes</option>
                   </select><br>
                   <div id="animationLoopCountConfig" style="display:none;"> 
                       <label for="objAnimationLoopCount">Loop Count:</label><input type="number" id="objAnimationLoopCount" min="1" value="3">
                   </div>
                   <div style="display:none;"><label for="objAnimationLoopDelay">Loop Delay (ms):</label><input type="number" id="objAnimationLoopDelay" min="0" value="500"></div>
                 </div>
            </div>

            <div id="fontFamilyPopover" class="toolbar-popover">
                <h4>Font Family</h4>
                <select id="objFontFamily" class="toolbar-select-compact" style="width: 100%; margin-bottom:10px;"></select>
                <select id="objFontWeight" style="display:none;"><option value="normal">Normal</option><option value="bold">Bold</option></select>
                <select id="objFontStyle" style="display:none;"><option value="normal">Normal</option><option value="italic">Italic</option></select>
                <select id="objTextAlign" style="display:none;"><option value="left">Left</option><option value="center">Center</option><option value="right">Right</option><option value="justify">Justify</option></select>
            </div>

            <div id="fillColorPopover" class="toolbar-popover" style="min-width: 180px;">
                <h4>Fill Color</h4>
                <label for="objFill" class="sr-only">Fill Color:</label>
                <input type="color" id="objFill" class="toolbar-color-input" value="#ff0000" style="width: calc(100% - 20px); margin: 0 auto; display: block;">
            </div>

            <div id="strokeColorPopover" class="toolbar-popover" style="min-width: 220px;">
                <h4>Stroke</h4>
                <label for="objStrokeColor" style="display: block; margin-bottom: 5px; width: 50px;">Color:</label>
                <input type="color" id="objStrokeColor" class="toolbar-color-input" value="#000000" style="vertical-align: middle;">
                <br>
                <label for="objStrokeWidth" style="display: block; margin-bottom: 5px; margin-top: 10px; width: 50px;">Width:</label>
                <input type="number" id="objStrokeWidth" min="0" class="toolbar-input-compact" title="Stroke Width" value="1" style="width: 60px; vertical-align: middle;">
            </div>

            <div id="opacityPopover" class="toolbar-popover" style="min-width: 200px;">
                <h4>Opacity</h4>
                <label for="objOpacity" class="sr-only">Opacity:</label>
                <input type="range" id="objOpacity" min="0" max="1" step="0.01" value="1.0" title="Opacity" style="width: calc(100% - 50px); margin: 5px 0; vertical-align: middle;">
                <span id="objOpacityValueDisplay" style="font-size:0.9em; width: 35px; text-align: right; display: inline-block; vertical-align: middle;">100%</span>
            </div>
        </div> 


        <div id="fabricCanvasContainer" style="position: relative;">
            <div id="adminYouTubePlayerContainer" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; z-index: 1;"></div>
            <div id="adminMediaPlaceholder" class="media-placeholder" style="display: none; position: absolute; top: 0; left: 0; width: 100%; height: 100%; z-index: 3; background-color: #f0f0f0; display: flex; justify-content: center; align-items: center;"></div>
            <canvas id="fabricCanvasElement" style="position: relative; z-index: 2;"></canvas>
        </div>

        <div id="videoTimelineControls" style="display:none; margin-top: 10px; padding: 10px; border: 1px solid var(--theme-border-color); border-radius: 5px; background-color: var(--theme-background-card);">
            <h4>Video Timeline</h4>
            <input type="range" id="videoTimelineSlider" min="0" max="100" value="0" style="width: 100%;">
            <div>
                <span>Current Time: <span id="videoCurrentTimeDisplay">0:00</span></span>
                <span style="float: right;">Total Duration: <span id="videoTotalDurationDisplay">0:00</span></span>
            </div>
            <button id="addQuestionBtn" style="margin-top: 10px;">Add Question at Timestamp</button>
            <button id="manageTimestampOverlaysButton" style="margin-top: 10px; display: none; background-color: var(--theme-primary-color);">Manage Timestamp Overlays</button>
        </div>

        <div id="videoQuestionsListContainer" style="display:none; margin-top: 10px; padding: 10px; border: 1px solid var(--theme-border-color); border-radius: 5px; background-color: var(--theme-background-card);">
            <h4>Added Questions:</h4>
            <ul id="videoQuestionsList" style="list-style: none; padding: 0;"></ul>
        </div>
        
        <div id="timestampOverlayModal" class="toolbar-popover">
            <h3>Manage Timestamp Overlays</h3>
            <p style="font-size:0.9em; color: var(--theme-text-color-secondary); margin-bottom:10px;">Select an object on the main canvas, then click "Add Overlay" to use it at the current video time.</p>
            <div>
                <label for="makeOverlayInteractiveCheckbox" class="checkbox-label" style="font-weight:normal;">
                    <input type="checkbox" id="makeOverlayInteractiveCheckbox"> Make this overlay interactive?
                </label>
            </div>
            <!-- Input for Hide Time - For future more detailed editing, for now JS uses a default or prompt -->
            <!-- <label for="currentOverlayTimestampInput" style="display:block; margin-top:5px;">Hide At (secs, optional):</label>
            <input type="number" id="currentOverlayTimestampInput" class="toolbar-input-compact" style="width:70px;" step="0.1" min="0"> -->

            <button id="addTimestampOverlayButton" style="margin-top: 10px; margin-bottom:15px;">Add Overlay from Selected Object</button>
            
            <h4>Existing Overlays for this Slide:</h4>
            <ul id="timestampOverlayList">
                <!-- Dynamically populated by JS: e.g., <li>[0:15 to 0:20] Text: "Hello" (Interactive) <button>Edit</button> <button>Delete</button></li> -->
            </ul>
            <button id="closeTimestampOverlayModalBtn" class="danger-button" style="margin-top:15px; float:right;" onclick="document.getElementById('timestampOverlayModal').style.display='none';">Close</button>
        </div>


        <div id="slideManagementPanel">
            <h3>Slides</h3>
            <button id="addSlideButton">Add New Slide</button>
            <button id="saveProjectButton" class="edit-button">Save Project</button>
            <div id="slideThumbnailsContainer">
                 <!-- Dynamically populated -->
            </div>
        </div>
    </div> <!-- End of editViewContainer -->

    <div id="messageArea"></div>

    <?!= include('Client/Shared/LoadingSpinner'); ?>
    <?!= include('Client/Admin/Admin_JS'); ?>
    </div> <!-- End of main-content-wrapper -->

    <div id="questionModal" class="toolbar-popover" style="display: none; position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 400px; z-index: 1001;">
        <h3>Add/Edit Video Question</h3>
        <p>Question at: <span id="questionTimestampDisplay">0:00</span></p>
        
        <label for="questionText">Question:</label>
        <textarea id="questionText" style="width: calc(100% - 20px); min-height: 60px; margin-bottom:10px;"></textarea>
        
        <div class="question-option-group" style="margin-bottom: 8px;">
            <label for="option1">Option 1:</label>
            <input type="text" id="option1" style="width: calc(100% - 100px); margin-right: 5px;">
            <input type="radio" name="correctAnswer" value="0" id="correctAnswer0"> <label for="correctAnswer0" class="checkbox-label">Correct</label>
        </div>
        <div class="question-option-group" style="margin-bottom: 8px;">
            <label for="option2">Option 2:</label>
            <input type="text" id="option2" style="width: calc(100% - 100px); margin-right: 5px;">
            <input type="radio" name="correctAnswer" value="1" id="correctAnswer1"> <label for="correctAnswer1" class="checkbox-label">Correct</label>
        </div>
        <div class="question-option-group" style="margin-bottom: 8px;">
            <label for="option3">Option 3:</label>
            <input type="text" id="option3" style="width: calc(100% - 100px); margin-right: 5px;">
            <input type="radio" name="correctAnswer" value="2" id="correctAnswer2"> <label for="correctAnswer2" class="checkbox-label">Correct</label>
        </div>
        <div class="question-option-group" style="margin-bottom: 15px;">
            <label for="option4">Option 4:</label>
            <input type="text" id="option4" style="width: calc(100% - 100px); margin-right: 5px;">
            <input type="radio" name="correctAnswer" value="3" id="correctAnswer3"> <label for="correctAnswer3" class="checkbox-label">Correct</label>
        </div>
        
        <input type="hidden" id="editingQuestionIndex" value="-1">
        
        <button id="saveQuestionBtn" style="margin-right: 10px;">Save Question</button>
        <button id="cancelQuestionBtn" class="danger-button">Cancel</button>
    </div>
  </body>
</html>